#!/usr/bin/env bash

log() {
    echo "blog-download: $1" 1>&2
}

goose() {
    uname | awk '{print tolower($0)}'
}

release() {
    echo "v$(cat VERSION)"
}

BIN_NAME="blog-$(goose)"
BIN_TARGET="./bin/blog"

log "downloading $BIN_NAME from latest release"
wget -O "$BIN_TARGET" "https://github.com/arecker/blog/releases/download/$(release)/${BIN_NAME}" &> /dev/null

log "making $BIN_TARGET executable"
chmod +x "$BIN_TARGET"
